/* # transcript/src/Makefile.bsd
   #
   # Copyright (C) 1985,1987 Adobe Systems Incorporated. All rights reserved.
   # GOVERNMENT END USERS: See notice of rights in Notice file in release directory.
   # RCSID: $Header: /afs/dev.mit.edu/source/repository/athena/bin/lpr/transcript-v2.1/Imakefile,v 1.7 1992-05-12 18:09:42 lwvanels Exp $
*/

PSLIBDIR=/usr/athena/lib/ps
PSTEMPDIR=/tmp
DITDIR=/usr/lib/font
TROFFFONTDIR=$(PSLIBDIR)/troff.font

#if defined(AIX) && defined(_I386)
OCFLAGS=-D_BSD
OLIBS=-lbsd
#endif

#if defined(_IBMR2)
OLIBS=-lbsd
#endif

#if defined(_AUX_SOURCE)
OLIBS=-lposix
#endif

DEFINES=-DBSD -DSYSLOG -DZEPHYR ${OCFLAGS}
LIBS= -lzephyr -lcom_err -lkrb -ldes $(OLIBS)

programs: all

create_dir($(PSLIBDIR))
SimpleProgram(pscomm,pscomm.o psutil.o config.o,$(LIBS),$(PSLIBDIR))
install_script(psif,,$(PSLIBDIR)/psif)


config.c: config.proto Makefile
	-rm -f config.c
	sed	-e s,PSLIBDIR,$(PSLIBDIR),g \
		-e s,TROFFFONTDIR,$(TROFFFONTDIR),g \
		-e s,DITDIR,$(DITDIR),g \
		-e s,PSTEMPDIR,$(PSTEMPDIR),g \
		config.proto >config.c

config.o: config.c
pscomm.o psutil.o: transcript.h
pscomm.o: psspool.h
pscat.o pscatmap.o: action.h 

clean::
	rm -f config.c 

#if 0
depend: config.c
	makedepend ${CFLAGS} pscomm.c psutil.c config.c

#endif
